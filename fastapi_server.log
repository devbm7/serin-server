2025-08-11 10:20:12,195 - supabase_config - WARNING - SUPABASE_URL not found in environment variables
2025-08-11 10:20:12,196 - supabase_config - WARNING - SUPABASE_SERVICE_ROLE_KEY or SUPABASE_ANON_KEY not found in environment variables
2025-08-11 10:20:12,734 - supabase_config - INFO - Supabase client initialized successfully
2025-08-11 10:20:13,824 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/_test_connection?select=%2A&limit=1 "HTTP/2 404 Not Found"
2025-08-11 10:20:13,828 - supabase_config - WARNING - Supabase connection test failed (this is normal if test table doesn't exist): {'message': 'relation "public._test_connection" does not exist', 'code': '42P01', 'hint': None, 'details': None}
2025-08-11 10:20:13,832 - __main__ - ERROR - Failed to start server: No module named 'fastapi_pipeline'
2025-08-11 10:21:53,141 - supabase_config - WARNING - SUPABASE_URL not found in environment variables
2025-08-11 10:21:53,147 - supabase_config - WARNING - SUPABASE_SERVICE_ROLE_KEY or SUPABASE_ANON_KEY not found in environment variables
2025-08-11 10:21:53,627 - supabase_config - INFO - Supabase client initialized successfully
2025-08-11 10:21:54,411 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/_test_connection?select=%2A&limit=1 "HTTP/2 404 Not Found"
2025-08-11 10:21:54,417 - supabase_config - WARNING - Supabase connection test failed (this is normal if test table doesn't exist): {'message': 'relation "public._test_connection" does not exist', 'code': '42P01', 'hint': None, 'details': None}
2025-08-11 10:22:18,549 - root - INFO - Video processing libraries loaded successfully
2025-08-11 10:22:18,549 - root - INFO - Supabase configuration loaded successfully
2025-08-11 10:22:25,656 - httpx - INFO - HTTP Request: GET https://raw.githubusercontent.com/BerriAI/litellm/main/model_prices_and_context_window.json "HTTP/1.1 200 OK"
2025-08-11 10:22:34,912 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.0-flash; provider = gemini
2025-08-11 10:22:36,368 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 10:22:36,372 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 10:22:36,396 - fastapi_pipeline - INFO - Local recordings directory: D:\Academics\Codegrounds\Work\Blink\Server\poc\recordings
2025-08-11 10:22:36,396 - fastapi_pipeline - INFO - Sessions directory: D:\Academics\Codegrounds\Work\Blink\Server\poc\sessions
2025-08-11 10:22:36,396 - fastapi_pipeline - INFO - Initializing Video Annotation Processor
2025-08-11 10:22:38,026 - fastapi_pipeline - INFO - Video annotation model loaded successfully
2025-08-11 10:22:38,026 - fastapi_pipeline - INFO - Video annotation processor initialized successfully
2025-08-11 10:22:38,026 - fastapi_pipeline - INFO - Supabase storage is available for recordings
2025-08-11 10:22:38,027 - fastapi_pipeline - INFO - Session cleanup thread started
2025-08-11 18:31:49,842 - supabase_config - WARNING - SUPABASE_URL not found in environment variables
2025-08-11 18:31:49,852 - supabase_config - WARNING - SUPABASE_SERVICE_ROLE_KEY or SUPABASE_ANON_KEY not found in environment variables
2025-08-11 18:31:50,300 - supabase_config - INFO - Supabase client initialized successfully
2025-08-11 18:31:51,424 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/_test_connection?select=%2A&limit=1 "HTTP/2 404 Not Found"
2025-08-11 18:31:51,424 - supabase_config - WARNING - Supabase connection test failed (this is normal if test table doesn't exist): {'message': 'relation "public._test_connection" does not exist', 'code': '42P01', 'hint': None, 'details': None}
2025-08-11 18:32:05,740 - root - INFO - Video processing libraries loaded successfully
2025-08-11 18:32:05,740 - root - INFO - Supabase configuration loaded successfully
2025-08-11 18:32:08,633 - httpx - INFO - HTTP Request: GET https://raw.githubusercontent.com/BerriAI/litellm/main/model_prices_and_context_window.json "HTTP/1.1 200 OK"
2025-08-11 18:32:13,406 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.0-flash; provider = gemini
2025-08-11 18:32:15,965 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 18:32:15,970 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 18:32:15,984 - fastapi_pipeline - INFO - Local recordings directory: D:\Academics\Codegrounds\Work\Blink\Server\poc\recordings
2025-08-11 18:32:15,984 - fastapi_pipeline - INFO - Sessions directory: D:\Academics\Codegrounds\Work\Blink\Server\poc\sessions
2025-08-11 18:32:15,984 - fastapi_pipeline - INFO - Initializing Video Annotation Processor
2025-08-11 18:32:16,961 - fastapi_pipeline - INFO - Video annotation model loaded successfully
2025-08-11 18:32:16,961 - fastapi_pipeline - INFO - Video annotation processor initialized successfully
2025-08-11 18:32:16,961 - fastapi_pipeline - INFO - Supabase storage is available for recordings
2025-08-11 18:32:16,965 - fastapi_pipeline - INFO - Session cleanup thread started
2025-08-11 18:35:31,218 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/job_templates?select=%2A&is_active=eq.True "HTTP/2 200 OK"
2025-08-11 18:35:31,473 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/job_templates?select=%2A&is_active=eq.True "HTTP/2 200 OK"
2025-08-11 18:35:31,602 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/user_profiles?select=user_id%2Cfirst_name%2Clast_name%2Cresume_url%2Cresume_filename&user_id=eq.23a0b603-e437-42d6-b1e0-6e0a1b983150&resume_url=not.is.null "HTTP/2 200 OK"
2025-08-11 18:35:31,717 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/user_profiles?select=user_id%2Cfirst_name%2Clast_name%2Cresume_url%2Cresume_filename&user_id=eq.23a0b603-e437-42d6-b1e0-6e0a1b983150&resume_url=not.is.null "HTTP/2 200 OK"
2025-08-11 18:35:49,538 - fastapi_pipeline - INFO - Creating session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:35:49,538 - fastapi_pipeline - INFO - Initializing ASR processor for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:35:49,538 - fastapi_pipeline - INFO - Initializing ASR Processor with model: openai/whisper-medium
2025-08-11 18:36:03,922 - fastapi_pipeline - INFO - ASR model loaded successfully on cuda
2025-08-11 18:36:03,930 - fastapi_pipeline - INFO - Initializing VAD processor for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:03,930 - fastapi_pipeline - INFO - Initializing VAD Processor
2025-08-11 18:36:04,147 - fastapi_pipeline - INFO - VAD model loaded successfully
2025-08-11 18:36:04,147 - fastapi_pipeline - INFO - Initializing LLM client for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:04,147 - fastapi_pipeline - INFO - Initializing LiteLLM client with base URL: http://localhost:11434
2025-08-11 18:36:04,148 - fastapi_pipeline - INFO - Initializing TTS processor for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:04,148 - fastapi_pipeline - INFO - Initializing TTS Processor
2025-08-11 18:36:09,034 - fastapi_pipeline - INFO - TTS pipeline initialized successfully
2025-08-11 18:36:09,035 - fastapi_pipeline - INFO - Loading resume content for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:09,035 - fastapi_pipeline - INFO - Extracted path from URL: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 18:36:10,122 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/sign/resumes/23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf "HTTP/2 200 OK"
2025-08-11 18:36:10,886 - supabase_config - INFO - Resume downloaded successfully: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 18:36:10,943 - fastapi_pipeline - INFO - Successfully loaded resume content from path: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 18:36:10,943 - fastapi_pipeline - INFO - Creating initial prompt for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:10,945 - fastapi_pipeline - INFO - Generating next question
2025-08-11 18:36:10,945 - fastapi_pipeline - INFO - Using Gemini model: gemini/gemini-2.5-flash with API key: AIzaSyA_lZ...CY0Y
2025-08-11 18:36:10,946 - fastapi_pipeline - INFO - Making LiteLLM request to gemini/gemini-2.5-flash with 3 messages
2025-08-11 18:36:10,958 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.5-flash; provider = gemini
2025-08-11 18:36:16,440 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 18:36:16,452 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 18:36:16,456 - fastapi_pipeline - INFO - LiteLLM qgen completed in 5.510s
2025-08-11 18:36:16,461 - fastapi_pipeline - INFO - Getting conversational response
2025-08-11 18:36:16,461 - fastapi_pipeline - INFO - Using Gemini model: gemini/gemini-2.5-flash with API key: AIzaSyA_lZ...CY0Y
2025-08-11 18:36:16,461 - fastapi_pipeline - INFO - Making LiteLLM request to gemini/gemini-2.5-flash with 3 messages
2025-08-11 18:36:16,463 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.5-flash; provider = gemini
2025-08-11 18:36:17,347 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 18:36:17,347 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 18:36:17,349 - fastapi_pipeline - INFO - LiteLLM chat completed in 0.888s
2025-08-11 18:36:20,884 - fastapi_pipeline - INFO - TTS synthesis completed in 3.534s
2025-08-11 18:36:20,889 - fastapi_pipeline - INFO - WAV file created: 368444 bytes
2025-08-11 18:36:20,891 - fastapi_pipeline - INFO - Session a5d43713-cea8-47a9-a08c-5a09602e18a6 created successfully
2025-08-11 18:36:21,144 - fastapi_pipeline - INFO - Starting continuous audio processing for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:21,144 - fastapi_pipeline - INFO - Created session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:29,265 - fastapi_pipeline - INFO - WebSocket connection established for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:29,266 - fastapi_pipeline - INFO - WebSocket accepted for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:29,266 - fastapi_pipeline - INFO - WebSocket ready for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:29,291 - fastapi_pipeline - INFO - Opening response sent successfully to session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:29,295 - fastapi_pipeline - INFO - WebSocket connection established for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:29,296 - fastapi_pipeline - INFO - WebSocket accepted for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:29,296 - fastapi_pipeline - INFO - WebSocket ready for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:36:48,492 - fastapi_pipeline - ERROR - Error in WebSocket loop for session a5d43713-cea8-47a9-a08c-5a09602e18a6: 1005
2025-08-11 18:36:48,639 - fastapi_pipeline - INFO - Raw recording saved locally for session a5d43713-cea8-47a9-a08c-5a09602e18a6: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm (3843735 bytes)
2025-08-11 18:36:48,639 - fastapi_pipeline - INFO - Processing video for anomaly detection (session a5d43713-cea8-47a9-a08c-5a09602e18a6)
2025-08-11 18:36:48,639 - fastapi_pipeline - INFO - Raw video path: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm
2025-08-11 18:36:48,639 - fastapi_pipeline - INFO - Temporary annotated video path: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated.webm
2025-08-11 18:36:48,640 - fastapi_pipeline - INFO - Starting video annotation: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm -> recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated.webm
2025-08-11 18:36:48,640 - fastapi_pipeline - INFO - Input video exists: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm
2025-08-11 18:36:48,760 - fastapi_pipeline - INFO - FFprobe video properties: 640x480, 1000.000 FPS, duration: 0.00s
2025-08-11 18:36:48,930 - fastapi_pipeline - INFO - Temporary video writer created with 1000.000 FPS: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated_temp.mp4
2025-08-11 18:36:48,953 - rfdetr.detr - WARNING - Model is not optimized for inference. Latency may be higher than expected. You can optimize the model for inference by calling model.optimize_for_inference().
2025-08-11 18:36:56,449 - fastapi_pipeline - INFO - Processed 100/-9223372036854775808 frames
2025-08-11 18:37:03,864 - fastapi_pipeline - INFO - Processed 200/-9223372036854775808 frames
2025-08-11 18:37:10,864 - fastapi_pipeline - INFO - Processed 300/-9223372036854775808 frames
2025-08-11 18:37:17,536 - fastapi_pipeline - INFO - Processed 400/-9223372036854775808 frames
2025-08-11 18:37:22,614 - fastapi_pipeline - INFO - Temporary annotated video created: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated_temp.mp4
2025-08-11 18:37:22,647 - fastapi_pipeline - INFO - Temporary video properties: 1000.000 FPS, 472 frames, duration: 0.47s
2025-08-11 18:37:22,647 - fastapi_pipeline - WARNING - Frame count mismatch: original=-9223372036854775808, annotated=472
2025-08-11 18:37:22,647 - fastapi_pipeline - INFO - Running FFmpeg command (VP9): ffmpeg -i recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated_temp.mp4 -i recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm -c:v libvpx-vp9 -crf 30 -b:v 0 -vsync 1 -async 1 -copyts -c:a copy -map 0:v:0 -map 1:a:0 -y recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated.webm
2025-08-11 18:37:48,020 - fastapi_pipeline - INFO - FFmpeg successfully created annotated video with audio (VP9): recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated.webm
2025-08-11 18:37:48,021 - fastapi_pipeline - INFO - Temporary file cleaned up: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated_temp.mp4
2025-08-11 18:37:48,055 - fastapi_pipeline - INFO - Final video properties: 1000.000 FPS, 15846 frames, duration: 15.85s
2025-08-11 18:37:48,055 - fastapi_pipeline - WARNING - Final frame count mismatch: original=-9223372036854775808, final=15846
2025-08-11 18:37:48,055 - fastapi_pipeline - INFO - Video annotation completed: 472 frames processed
2025-08-11 18:37:48,055 - fastapi_pipeline - INFO - Detection summary: 472 persons, 0 devices
2025-08-11 18:37:48,058 - fastapi_pipeline - INFO - Detection data saved to: sessions\capture_data_a5d43713-cea8-47a9-a08c-5a09602e18a6.json
2025-08-11 18:37:48,058 - fastapi_pipeline - INFO - Video detection processing completed for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:37:48,058 - fastapi_pipeline - INFO - Detection stats: 472 persons, 0 devices
2025-08-11 18:37:48,059 - fastapi_pipeline - INFO - Temporary annotated video cleaned up: recordings\a5d43713-cea8-47a9-a08c-5a09602e18a6\session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648_temp_annotated.webm
2025-08-11 18:37:50,414 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/interview-recordings/a5d43713-cea8-47a9-a08c-5a09602e18a6/session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm "HTTP/2 200 OK"
2025-08-11 18:37:50,415 - supabase_config - INFO - Recording uploaded to Supabase: a5d43713-cea8-47a9-a08c-5a09602e18a6/session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm
2025-08-11 18:37:50,416 - fastapi_pipeline - INFO - Raw recording uploaded to Supabase for session a5d43713-cea8-47a9-a08c-5a09602e18a6: a5d43713-cea8-47a9-a08c-5a09602e18a6/session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm (3843735 bytes)
2025-08-11 18:37:50,416 - fastapi_pipeline - INFO - No session ID mapping found for a5d43713-cea8-47a9-a08c-5a09602e18a6, trying to find session in database
2025-08-11 18:37:50,807 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/interview_sessions?select=session_id%2Cstart_time%2Crecording_url&start_time=gte.2025-08-11T17%3A37%3A50.417092 "HTTP/2 200 OK"
2025-08-11 18:37:50,817 - supabase_config - WARNING - No recent sessions found in database
2025-08-11 18:37:50,818 - fastapi_pipeline - INFO - No existing session found to update with recording URL for a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 18:37:50,951 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/job_templates?select=%2A&is_active=eq.True "HTTP/2 200 OK"
2025-08-11 18:37:51,209 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/job_templates?select=%2A&is_active=eq.True "HTTP/2 200 OK"
2025-08-11 18:37:51,516 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/user_profiles?select=user_id%2Cfirst_name%2Clast_name%2Cresume_url%2Cresume_filename&user_id=eq.23a0b603-e437-42d6-b1e0-6e0a1b983150&resume_url=not.is.null "HTTP/2 200 OK"
2025-08-11 18:37:51,629 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/user_profiles?select=user_id%2Cfirst_name%2Clast_name%2Cresume_url%2Cresume_filename&user_id=eq.23a0b603-e437-42d6-b1e0-6e0a1b983150&resume_url=not.is.null "HTTP/2 200 OK"
2025-08-11 18:40:02,946 - fastapi_pipeline - ERROR - Error in WebSocket loop for session a5d43713-cea8-47a9-a08c-5a09602e18a6: 1001
2025-08-11 18:40:34,366 - fastapi_pipeline - INFO - WebSocket connection established for session f9bcc4d8-c777-4637-952a-f81b1672fddd
2025-08-11 18:40:34,367 - fastapi_pipeline - INFO - WebSocket accepted for session f9bcc4d8-c777-4637-952a-f81b1672fddd
2025-08-11 18:40:34,367 - fastapi_pipeline - ERROR - Failed to get session f9bcc4d8-c777-4637-952a-f81b1672fddd: 
2025-08-11 18:40:34,382 - fastapi_pipeline - INFO - WebSocket connection established for session f9bcc4d8-c777-4637-952a-f81b1672fddd
2025-08-11 18:40:34,382 - fastapi_pipeline - INFO - WebSocket accepted for session f9bcc4d8-c777-4637-952a-f81b1672fddd
2025-08-11 18:40:34,383 - fastapi_pipeline - ERROR - Failed to get session f9bcc4d8-c777-4637-952a-f81b1672fddd: 
2025-08-11 18:41:13,398 - fastapi_pipeline - ERROR - Failed to upload recording for session f9bcc4d8-c777-4637-952a-f81b1672fddd: 
2025-08-11 18:51:58,097 - fastapi_pipeline - INFO - WebSocket connection established for session 6b8b4a07-bc8d-4bf9-afc0-5312965aa2a1
2025-08-11 18:51:58,099 - fastapi_pipeline - INFO - WebSocket accepted for session 6b8b4a07-bc8d-4bf9-afc0-5312965aa2a1
2025-08-11 18:51:58,100 - fastapi_pipeline - ERROR - Failed to get session 6b8b4a07-bc8d-4bf9-afc0-5312965aa2a1: 
2025-08-11 18:51:58,130 - fastapi_pipeline - INFO - WebSocket connection established for session 6b8b4a07-bc8d-4bf9-afc0-5312965aa2a1
2025-08-11 18:51:58,130 - fastapi_pipeline - INFO - WebSocket accepted for session 6b8b4a07-bc8d-4bf9-afc0-5312965aa2a1
2025-08-11 18:51:58,130 - fastapi_pipeline - ERROR - Failed to get session 6b8b4a07-bc8d-4bf9-afc0-5312965aa2a1: 
2025-08-11 18:52:12,387 - fastapi_pipeline - ERROR - Failed to upload recording for session 6b8b4a07-bc8d-4bf9-afc0-5312965aa2a1: 
2025-08-11 19:07:16,981 - fastapi_pipeline - INFO - Session a5d43713-cea8-47a9-a08c-5a09602e18a6 timed out, auto-saving and cleaning up
2025-08-11 19:07:16,995 - fastapi_pipeline - INFO - Found recording URL for session a5d43713-cea8-47a9-a08c-5a09602e18a6: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/interview-recordings/a5d43713-cea8-47a9-a08c-5a09602e18a6/session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm?
2025-08-11 19:07:17,003 - fastapi_pipeline - INFO - No detection data found for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 19:07:17,871 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/interview_sessions "HTTP/2 201 Created"
2025-08-11 19:07:17,883 - supabase_config - INFO - Interview session saved successfully with ID: a8fd4b7a-7438-4cd1-a838-d9dde2ae2534
2025-08-11 19:07:17,885 - fastapi_pipeline - INFO - Session a5d43713-cea8-47a9-a08c-5a09602e18a6 information saved to database with ID: a8fd4b7a-7438-4cd1-a838-d9dde2ae2534
2025-08-11 19:07:17,885 - fastapi_pipeline - INFO -   - Start time: 2025-08-11T18:35:49.538444
2025-08-11 19:07:17,885 - fastapi_pipeline - INFO -   - Resume URL: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/resumes/23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 19:07:17,886 - fastapi_pipeline - INFO -   - Recording URL: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/interview-recordings/a5d43713-cea8-47a9-a08c-5a09602e18a6/session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm?
2025-08-11 19:07:17,886 - fastapi_pipeline - INFO -   - Conversation messages: 1
2025-08-11 19:07:17,886 - fastapi_pipeline - INFO -   - Anomalies detected: 0
2025-08-11 19:07:17,887 - fastapi_pipeline - INFO - Session a5d43713-cea8-47a9-a08c-5a09602e18a6 auto-saved due to timeout
2025-08-11 19:07:17,887 - fastapi_pipeline - INFO - Found recording URL for session a5d43713-cea8-47a9-a08c-5a09602e18a6: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/interview-recordings/a5d43713-cea8-47a9-a08c-5a09602e18a6/session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm?
2025-08-11 19:07:17,888 - fastapi_pipeline - INFO - No detection data found for session a5d43713-cea8-47a9-a08c-5a09602e18a6
2025-08-11 19:07:18,225 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/interview_sessions "HTTP/2 201 Created"
2025-08-11 19:07:18,226 - supabase_config - INFO - Interview session saved successfully with ID: d32789ef-579e-4f5c-8d05-99f140fc0baa
2025-08-11 19:07:18,227 - fastapi_pipeline - INFO - Session a5d43713-cea8-47a9-a08c-5a09602e18a6 information saved to database with ID: d32789ef-579e-4f5c-8d05-99f140fc0baa
2025-08-11 19:07:18,227 - fastapi_pipeline - INFO -   - Start time: 2025-08-11T18:35:49.538444
2025-08-11 19:07:18,227 - fastapi_pipeline - INFO -   - Resume URL: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/resumes/23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 19:07:18,227 - fastapi_pipeline - INFO -   - Recording URL: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/interview-recordings/a5d43713-cea8-47a9-a08c-5a09602e18a6/session_recording_a5d43713-cea8-47a9-a08c-5a09602e18a6_20250811_183648.webm?
2025-08-11 19:07:18,227 - fastapi_pipeline - INFO -   - Conversation messages: 1
2025-08-11 19:07:18,229 - fastapi_pipeline - INFO -   - Anomalies detected: 0
2025-08-11 19:07:19,239 - fastapi_pipeline - INFO - Session a5d43713-cea8-47a9-a08c-5a09602e18a6 deleted
2025-08-11 19:07:19,239 - fastapi_pipeline - INFO - Session a5d43713-cea8-47a9-a08c-5a09602e18a6 cleaned up due to timeout
2025-08-11 19:30:08,095 - fastapi_pipeline - INFO - WebSocket connection established for session 9ff2ad98-19c8-4742-a070-450a4ab2db06
2025-08-11 19:30:08,118 - fastapi_pipeline - INFO - WebSocket accepted for session 9ff2ad98-19c8-4742-a070-450a4ab2db06
2025-08-11 19:30:08,119 - fastapi_pipeline - ERROR - Failed to get session 9ff2ad98-19c8-4742-a070-450a4ab2db06: 
2025-08-11 19:30:08,157 - fastapi_pipeline - INFO - WebSocket connection established for session 9ff2ad98-19c8-4742-a070-450a4ab2db06
2025-08-11 19:30:08,158 - fastapi_pipeline - INFO - WebSocket accepted for session 9ff2ad98-19c8-4742-a070-450a4ab2db06
2025-08-11 19:30:08,159 - fastapi_pipeline - ERROR - Failed to get session 9ff2ad98-19c8-4742-a070-450a4ab2db06: 
2025-08-11 19:30:39,410 - fastapi_pipeline - ERROR - Failed to upload recording for session 9ff2ad98-19c8-4742-a070-450a4ab2db06: 
2025-08-11 19:50:08,308 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/job_templates?select=%2A&is_active=eq.True "HTTP/2 200 OK"
2025-08-11 19:50:08,672 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/user_profiles?select=user_id%2Cfirst_name%2Clast_name%2Cresume_url%2Cresume_filename&user_id=eq.23a0b603-e437-42d6-b1e0-6e0a1b983150&resume_url=not.is.null "HTTP/2 200 OK"
2025-08-11 19:50:19,211 - fastapi_pipeline - INFO - Creating session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:50:19,215 - fastapi_pipeline - INFO - Initializing ASR processor for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:50:19,219 - fastapi_pipeline - INFO - Initializing ASR Processor with model: openai/whisper-medium
2025-08-11 19:50:42,573 - fastapi_pipeline - INFO - ASR model loaded successfully on cuda
2025-08-11 19:50:42,582 - fastapi_pipeline - INFO - Initializing VAD processor for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:50:42,582 - fastapi_pipeline - INFO - Initializing VAD Processor
2025-08-11 19:50:43,090 - fastapi_pipeline - INFO - VAD model loaded successfully
2025-08-11 19:50:43,090 - fastapi_pipeline - INFO - Initializing LLM client for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:50:43,092 - fastapi_pipeline - INFO - Initializing LiteLLM client with base URL: http://localhost:11434
2025-08-11 19:50:43,092 - fastapi_pipeline - INFO - Initializing TTS processor for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:50:43,093 - fastapi_pipeline - INFO - Initializing TTS Processor
2025-08-11 19:50:53,131 - fastapi_pipeline - INFO - TTS pipeline initialized successfully
2025-08-11 19:50:53,131 - fastapi_pipeline - INFO - Loading resume content for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:50:53,131 - fastapi_pipeline - INFO - Extracted path from URL: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 19:50:53,569 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/sign/resumes/23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf "HTTP/2 200 OK"
2025-08-11 19:50:54,776 - supabase_config - INFO - Resume downloaded successfully: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 19:50:54,836 - fastapi_pipeline - INFO - Successfully loaded resume content from path: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 19:50:54,836 - fastapi_pipeline - INFO - Creating initial prompt for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:50:54,836 - fastapi_pipeline - INFO - Generating next question
2025-08-11 19:50:54,836 - fastapi_pipeline - INFO - Using Gemini model: gemini/gemini-2.5-flash with API key: AIzaSyA_lZ...CY0Y
2025-08-11 19:50:54,836 - fastapi_pipeline - INFO - Making LiteLLM request to gemini/gemini-2.5-flash with 3 messages
2025-08-11 19:50:54,841 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.5-flash; provider = gemini
2025-08-11 19:50:59,673 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 19:50:59,682 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 19:50:59,682 - fastapi_pipeline - INFO - LiteLLM qgen completed in 4.846s
2025-08-11 19:50:59,691 - fastapi_pipeline - INFO - Getting conversational response
2025-08-11 19:50:59,691 - fastapi_pipeline - INFO - Using Gemini model: gemini/gemini-2.5-flash with API key: AIzaSyA_lZ...CY0Y
2025-08-11 19:50:59,691 - fastapi_pipeline - INFO - Making LiteLLM request to gemini/gemini-2.5-flash with 3 messages
2025-08-11 19:50:59,694 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.5-flash; provider = gemini
2025-08-11 19:51:00,634 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 19:51:00,637 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 19:51:00,637 - fastapi_pipeline - INFO - LiteLLM chat completed in 0.946s
2025-08-11 19:51:04,520 - fastapi_pipeline - INFO - TTS synthesis completed in 3.881s
2025-08-11 19:51:04,525 - fastapi_pipeline - INFO - WAV file created: 446444 bytes
2025-08-11 19:51:04,531 - fastapi_pipeline - INFO - Session a7f254a7-2282-4a0f-9a80-bba7a0193d8d created successfully
2025-08-11 19:51:04,536 - fastapi_pipeline - INFO - Starting continuous audio processing for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:04,536 - fastapi_pipeline - INFO - Created session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:05,839 - fastapi_pipeline - INFO - WebSocket connection established for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:05,839 - fastapi_pipeline - INFO - WebSocket accepted for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:05,839 - fastapi_pipeline - INFO - WebSocket ready for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:05,871 - fastapi_pipeline - INFO - Opening response sent successfully to session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:05,873 - fastapi_pipeline - INFO - WebSocket connection established for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:05,875 - fastapi_pipeline - INFO - WebSocket accepted for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:05,875 - fastapi_pipeline - INFO - WebSocket ready for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:22,862 - fastapi_pipeline - ERROR - Error in WebSocket loop for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d: 1005
2025-08-11 19:51:23,201 - fastapi_pipeline - INFO - Raw recording saved locally for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d: recordings\a7f254a7-2282-4a0f-9a80-bba7a0193d8d\session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm (0 bytes)
2025-08-11 19:51:23,201 - fastapi_pipeline - INFO - Processing video for anomaly detection (session a7f254a7-2282-4a0f-9a80-bba7a0193d8d)
2025-08-11 19:51:23,201 - fastapi_pipeline - INFO - Raw video path: recordings\a7f254a7-2282-4a0f-9a80-bba7a0193d8d\session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm
2025-08-11 19:51:23,202 - fastapi_pipeline - INFO - Temporary annotated video path: recordings\a7f254a7-2282-4a0f-9a80-bba7a0193d8d\session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123_temp_annotated.webm
2025-08-11 19:51:23,202 - fastapi_pipeline - INFO - Starting video annotation: recordings\a7f254a7-2282-4a0f-9a80-bba7a0193d8d\session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm -> recordings\a7f254a7-2282-4a0f-9a80-bba7a0193d8d\session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123_temp_annotated.webm
2025-08-11 19:51:23,202 - fastapi_pipeline - INFO - Input video exists: recordings\a7f254a7-2282-4a0f-9a80-bba7a0193d8d\session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm
2025-08-11 19:51:23,321 - fastapi_pipeline - WARNING - FFprobe failed, falling back to OpenCV: 
2025-08-11 19:51:23,322 - fastapi_pipeline - ERROR - Video annotation error: FFprobe failed
2025-08-11 19:51:23,322 - fastapi_pipeline - ERROR - Video detection processing failed for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d: FFprobe failed
2025-08-11 19:51:23,332 - fastapi_pipeline - ERROR - Video detection error details: Traceback (most recent call last):
  File "D:\Academics\Codegrounds\Work\Blink\Server\poc\fastapi_pipeline.py", line 1026, in save_recording
    detection_stats = self.video_processor.annotate_video(
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\Academics\Codegrounds\Work\Blink\Server\poc\fastapi_pipeline.py", line 323, in annotate_video
    raise RuntimeError("FFprobe failed")
RuntimeError: FFprobe failed

2025-08-11 19:51:23,770 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/interview-recordings/a7f254a7-2282-4a0f-9a80-bba7a0193d8d/session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm "HTTP/2 200 OK"
2025-08-11 19:51:23,771 - supabase_config - INFO - Recording uploaded to Supabase: a7f254a7-2282-4a0f-9a80-bba7a0193d8d/session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm
2025-08-11 19:51:23,772 - fastapi_pipeline - INFO - Raw recording uploaded to Supabase for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d: a7f254a7-2282-4a0f-9a80-bba7a0193d8d/session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm (0 bytes)
2025-08-11 19:51:23,772 - fastapi_pipeline - INFO - No session ID mapping found for a7f254a7-2282-4a0f-9a80-bba7a0193d8d, trying to find session in database
2025-08-11 19:51:24,135 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/interview_sessions?select=session_id%2Cstart_time%2Crecording_url&start_time=gte.2025-08-11T18%3A51%3A23.773972 "HTTP/2 200 OK"
2025-08-11 19:51:24,145 - supabase_config - WARNING - No recent sessions found in database
2025-08-11 19:51:24,145 - fastapi_pipeline - INFO - No existing session found to update with recording URL for a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 19:51:24,406 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/job_templates?select=%2A&is_active=eq.True "HTTP/2 200 OK"
2025-08-11 19:51:24,666 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/job_templates?select=%2A&is_active=eq.True "HTTP/2 200 OK"
2025-08-11 19:51:24,959 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/user_profiles?select=user_id%2Cfirst_name%2Clast_name%2Cresume_url%2Cresume_filename&user_id=eq.23a0b603-e437-42d6-b1e0-6e0a1b983150&resume_url=not.is.null "HTTP/2 200 OK"
2025-08-11 19:51:25,196 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/user_profiles?select=user_id%2Cfirst_name%2Clast_name%2Cresume_url%2Cresume_filename&user_id=eq.23a0b603-e437-42d6-b1e0-6e0a1b983150&resume_url=not.is.null "HTTP/2 200 OK"
2025-08-11 20:02:23,166 - fastapi_pipeline - ERROR - Error in WebSocket loop for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d: 1001
2025-08-11 20:02:53,899 - fastapi_pipeline - INFO - WebSocket connection established for session b6e41811-e703-47e6-82c1-43a1d7a38303
2025-08-11 20:02:53,911 - fastapi_pipeline - INFO - WebSocket accepted for session b6e41811-e703-47e6-82c1-43a1d7a38303
2025-08-11 20:02:53,924 - fastapi_pipeline - ERROR - Failed to get session b6e41811-e703-47e6-82c1-43a1d7a38303: 
2025-08-11 20:02:54,025 - fastapi_pipeline - INFO - WebSocket connection established for session b6e41811-e703-47e6-82c1-43a1d7a38303
2025-08-11 20:02:54,026 - fastapi_pipeline - INFO - WebSocket accepted for session b6e41811-e703-47e6-82c1-43a1d7a38303
2025-08-11 20:02:54,027 - fastapi_pipeline - ERROR - Failed to get session b6e41811-e703-47e6-82c1-43a1d7a38303: 
2025-08-11 20:03:14,032 - fastapi_pipeline - ERROR - Failed to upload recording for session b6e41811-e703-47e6-82c1-43a1d7a38303: 
2025-08-11 20:08:13,198 - fastapi_pipeline - INFO - WebSocket connection established for session bd1a4f1f-7363-4582-84b8-0b993eca20c5
2025-08-11 20:08:13,213 - fastapi_pipeline - INFO - WebSocket accepted for session bd1a4f1f-7363-4582-84b8-0b993eca20c5
2025-08-11 20:08:13,213 - fastapi_pipeline - ERROR - Failed to get session bd1a4f1f-7363-4582-84b8-0b993eca20c5: 
2025-08-11 20:08:13,251 - fastapi_pipeline - INFO - WebSocket connection established for session bd1a4f1f-7363-4582-84b8-0b993eca20c5
2025-08-11 20:08:13,252 - fastapi_pipeline - INFO - WebSocket accepted for session bd1a4f1f-7363-4582-84b8-0b993eca20c5
2025-08-11 20:08:13,253 - fastapi_pipeline - ERROR - Failed to get session bd1a4f1f-7363-4582-84b8-0b993eca20c5: 
2025-08-11 20:08:59,469 - fastapi_pipeline - ERROR - Failed to upload recording for session bd1a4f1f-7363-4582-84b8-0b993eca20c5: 
2025-08-11 20:09:23,243 - fastapi_pipeline - INFO - WebSocket connection established for session df1a2117-fe35-4487-89ec-d9361ed780c4
2025-08-11 20:09:23,244 - fastapi_pipeline - INFO - WebSocket accepted for session df1a2117-fe35-4487-89ec-d9361ed780c4
2025-08-11 20:09:23,244 - fastapi_pipeline - ERROR - Failed to get session df1a2117-fe35-4487-89ec-d9361ed780c4: 
2025-08-11 20:09:23,289 - fastapi_pipeline - INFO - WebSocket connection established for session df1a2117-fe35-4487-89ec-d9361ed780c4
2025-08-11 20:09:23,290 - fastapi_pipeline - INFO - WebSocket accepted for session df1a2117-fe35-4487-89ec-d9361ed780c4
2025-08-11 20:09:23,290 - fastapi_pipeline - ERROR - Failed to get session df1a2117-fe35-4487-89ec-d9361ed780c4: 
2025-08-11 20:09:43,198 - fastapi_pipeline - ERROR - Failed to upload recording for session df1a2117-fe35-4487-89ec-d9361ed780c4: 
2025-08-11 20:22:19,304 - fastapi_pipeline - INFO - Session a7f254a7-2282-4a0f-9a80-bba7a0193d8d timed out, auto-saving and cleaning up
2025-08-11 20:22:19,459 - fastapi_pipeline - INFO - Found recording URL for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/interview-recordings/a7f254a7-2282-4a0f-9a80-bba7a0193d8d/session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm?
2025-08-11 20:22:19,496 - fastapi_pipeline - INFO - No detection data found for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 20:22:20,679 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/interview_sessions "HTTP/2 201 Created"
2025-08-11 20:22:20,772 - supabase_config - INFO - Interview session saved successfully with ID: 6785c190-6900-4e90-9822-a5abeb3639e2
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO - Session a7f254a7-2282-4a0f-9a80-bba7a0193d8d information saved to database with ID: 6785c190-6900-4e90-9822-a5abeb3639e2
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO -   - Start time: 2025-08-11T19:50:19.211714
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO -   - Resume URL: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/resumes/23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO -   - Recording URL: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/interview-recordings/a7f254a7-2282-4a0f-9a80-bba7a0193d8d/session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm?
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO -   - Conversation messages: 1
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO -   - Anomalies detected: 0
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO - Session a7f254a7-2282-4a0f-9a80-bba7a0193d8d auto-saved due to timeout
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO - Found recording URL for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/interview-recordings/a7f254a7-2282-4a0f-9a80-bba7a0193d8d/session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm?
2025-08-11 20:22:20,772 - fastapi_pipeline - INFO - No detection data found for session a7f254a7-2282-4a0f-9a80-bba7a0193d8d
2025-08-11 20:22:21,097 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/interview_sessions "HTTP/2 201 Created"
2025-08-11 20:22:21,097 - supabase_config - INFO - Interview session saved successfully with ID: 57553342-cefa-427c-b65b-4bc0b2c777cb
2025-08-11 20:22:21,097 - fastapi_pipeline - INFO - Session a7f254a7-2282-4a0f-9a80-bba7a0193d8d information saved to database with ID: 57553342-cefa-427c-b65b-4bc0b2c777cb
2025-08-11 20:22:21,097 - fastapi_pipeline - INFO -   - Start time: 2025-08-11T19:50:19.211714
2025-08-11 20:22:21,101 - fastapi_pipeline - INFO -   - Resume URL: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/resumes/23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 20:22:21,101 - fastapi_pipeline - INFO -   - Recording URL: https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/public/interview-recordings/a7f254a7-2282-4a0f-9a80-bba7a0193d8d/session_recording_a7f254a7-2282-4a0f-9a80-bba7a0193d8d_20250811_195123.webm?
2025-08-11 20:22:21,101 - fastapi_pipeline - INFO -   - Conversation messages: 1
2025-08-11 20:22:21,101 - fastapi_pipeline - INFO -   - Anomalies detected: 0
2025-08-11 20:22:22,122 - fastapi_pipeline - INFO - Session a7f254a7-2282-4a0f-9a80-bba7a0193d8d deleted
2025-08-11 20:22:22,122 - fastapi_pipeline - INFO - Session a7f254a7-2282-4a0f-9a80-bba7a0193d8d cleaned up due to timeout
2025-08-11 20:27:31,139 - supabase_config - WARNING - SUPABASE_URL not found in environment variables
2025-08-11 20:27:31,143 - supabase_config - WARNING - SUPABASE_SERVICE_ROLE_KEY or SUPABASE_ANON_KEY not found in environment variables
2025-08-11 20:27:32,159 - supabase_config - INFO - Supabase client initialized successfully
2025-08-11 20:27:33,753 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/_test_connection?select=%2A&limit=1 "HTTP/2 404 Not Found"
2025-08-11 20:27:33,759 - supabase_config - WARNING - Supabase connection test failed (this is normal if test table doesn't exist): {'message': 'relation "public._test_connection" does not exist', 'code': '42P01', 'hint': None, 'details': None}
2025-08-11 20:27:59,328 - root - INFO - Video processing libraries loaded successfully
2025-08-11 20:27:59,328 - root - INFO - Supabase configuration loaded successfully
2025-08-11 20:28:04,493 - httpx - INFO - HTTP Request: GET https://raw.githubusercontent.com/BerriAI/litellm/main/model_prices_and_context_window.json "HTTP/1.1 200 OK"
2025-08-11 20:28:12,912 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.0-flash; provider = gemini
2025-08-11 20:28:14,542 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 20:28:14,548 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 20:28:14,575 - fastapi_pipeline - INFO - Local recordings directory: D:\Academics\Codegrounds\Work\Blink\Server\poc\recordings
2025-08-11 20:28:14,576 - fastapi_pipeline - INFO - Sessions directory: D:\Academics\Codegrounds\Work\Blink\Server\poc\sessions
2025-08-11 20:28:14,576 - fastapi_pipeline - INFO - Initializing Video Annotation Processor
2025-08-11 20:28:16,276 - fastapi_pipeline - INFO - Video annotation model loaded successfully
2025-08-11 20:28:16,277 - fastapi_pipeline - INFO - Video annotation processor initialized successfully
2025-08-11 20:28:16,277 - fastapi_pipeline - INFO - Supabase storage is available for recordings
2025-08-11 20:28:16,279 - fastapi_pipeline - INFO - Session cleanup thread started
2025-08-11 20:32:05,719 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/job_templates?select=%2A&is_active=eq.True "HTTP/2 200 OK"
2025-08-11 20:32:05,917 - httpx - INFO - HTTP Request: GET https://ibnsjeoemngngkqnnjdz.supabase.co/rest/v1/user_profiles?select=user_id%2Cfirst_name%2Clast_name%2Cresume_url%2Cresume_filename&user_id=eq.23a0b603-e437-42d6-b1e0-6e0a1b983150&resume_url=not.is.null "HTTP/2 200 OK"
2025-08-11 20:32:10,950 - fastapi_pipeline - INFO - Creating session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:10,950 - fastapi_pipeline - INFO - Initializing ASR processor for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:10,950 - fastapi_pipeline - INFO - Initializing ASR Processor with model: openai/whisper-medium
2025-08-11 20:32:23,949 - fastapi_pipeline - INFO - ASR model loaded successfully on cuda
2025-08-11 20:32:23,964 - fastapi_pipeline - INFO - Initializing VAD processor for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:23,965 - fastapi_pipeline - INFO - Initializing VAD Processor
2025-08-11 20:32:24,157 - fastapi_pipeline - INFO - VAD model loaded successfully
2025-08-11 20:32:24,157 - fastapi_pipeline - INFO - Initializing LLM client for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:24,157 - fastapi_pipeline - INFO - Initializing LiteLLM client with base URL: http://localhost:11434
2025-08-11 20:32:24,157 - fastapi_pipeline - INFO - Initializing TTS processor for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:24,157 - fastapi_pipeline - INFO - Initializing TTS Processor
2025-08-11 20:32:28,123 - fastapi_pipeline - INFO - TTS pipeline initialized successfully
2025-08-11 20:32:28,124 - fastapi_pipeline - INFO - Loading resume content for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:28,125 - fastapi_pipeline - INFO - Extracted path from URL: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 20:32:29,102 - httpx - INFO - HTTP Request: POST https://ibnsjeoemngngkqnnjdz.supabase.co/storage/v1/object/sign/resumes/23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf "HTTP/2 200 OK"
2025-08-11 20:32:29,734 - supabase_config - INFO - Resume downloaded successfully: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 20:32:29,786 - fastapi_pipeline - INFO - Successfully loaded resume content from path: 23a0b603-e437-42d6-b1e0-6e0a1b983150/resume_1754526365292.pdf
2025-08-11 20:32:29,786 - fastapi_pipeline - INFO - Creating initial prompt for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:29,786 - fastapi_pipeline - INFO - Generating next question
2025-08-11 20:32:29,786 - fastapi_pipeline - INFO - Using Gemini model: gemini/gemini-2.5-flash with API key: AIzaSyA_lZ...CY0Y
2025-08-11 20:32:29,786 - fastapi_pipeline - INFO - Making LiteLLM request to gemini/gemini-2.5-flash with 3 messages
2025-08-11 20:32:29,803 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.5-flash; provider = gemini
2025-08-11 20:32:36,117 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 20:32:36,130 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 20:32:36,134 - fastapi_pipeline - INFO - LiteLLM qgen completed in 6.348s
2025-08-11 20:32:36,139 - fastapi_pipeline - INFO - Getting conversational response
2025-08-11 20:32:36,139 - fastapi_pipeline - INFO - Using Gemini model: gemini/gemini-2.5-flash with API key: AIzaSyA_lZ...CY0Y
2025-08-11 20:32:36,139 - fastapi_pipeline - INFO - Making LiteLLM request to gemini/gemini-2.5-flash with 3 messages
2025-08-11 20:32:36,139 - LiteLLM - INFO - 
LiteLLM completion() model= gemini-2.5-flash; provider = gemini
2025-08-11 20:32:36,964 - httpx - INFO - HTTP Request: POST https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=AIzaSyA_lZ78Rf_J9lCBqpu4hFaHSzYopB4CY0Y "HTTP/1.1 200 OK"
2025-08-11 20:32:36,972 - LiteLLM - INFO - Wrapper: Completed Call, calling success_handler
2025-08-11 20:32:36,972 - fastapi_pipeline - INFO - LiteLLM chat completed in 0.833s
2025-08-11 20:32:39,945 - fastapi_pipeline - INFO - TTS synthesis completed in 2.972s
2025-08-11 20:32:39,945 - fastapi_pipeline - INFO - WAV file created: 309644 bytes
2025-08-11 20:32:39,956 - fastapi_pipeline - INFO - Session fecce0ed-55bd-4987-ba10-1dd679d10ffa created successfully
2025-08-11 20:32:39,956 - fastapi_pipeline - INFO - Starting continuous audio processing for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:39,956 - fastapi_pipeline - INFO - Created session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:41,036 - fastapi_pipeline - INFO - WebSocket connection established for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:41,036 - fastapi_pipeline - INFO - WebSocket accepted for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:41,036 - fastapi_pipeline - INFO - WebSocket ready for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:41,050 - fastapi_pipeline - INFO - Opening response sent successfully to session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:41,062 - fastapi_pipeline - INFO - WebSocket connection established for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:41,062 - fastapi_pipeline - INFO - WebSocket accepted for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:32:41,062 - fastapi_pipeline - INFO - WebSocket ready for session fecce0ed-55bd-4987-ba10-1dd679d10ffa
2025-08-11 20:33:20,328 - fastapi_pipeline - ERROR - Error in WebSocket loop for session fecce0ed-55bd-4987-ba10-1dd679d10ffa: 1012
2025-08-11 20:33:20,328 - fastapi_pipeline - ERROR - Error in WebSocket loop for session fecce0ed-55bd-4987-ba10-1dd679d10ffa: 1012
